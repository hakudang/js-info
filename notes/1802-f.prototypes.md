# F.prototype
Khi báº¡n táº¡o object báº±ng constructor function thÃ´ng qua new F(), JavaScript sáº½:

â¡ï¸ Láº¥y F.prototype vÃ  gÃ¡n nÃ³ lÃ m [[Prototype]] cho object má»›i.

ÄÃ¢y lÃ  cÃ¡ch JS xÃ¢y dá»±ng cÆ¡ cháº¿ káº¿ thá»«a (prototypal inheritance) trÆ°á»›c khi ES6 class xuáº¥t hiá»‡n.

# 1. CÃ¡ch F.prototype hoáº¡t Ä‘á»™ng
```js
let animal = {
  eats: true
};

function Rabbit(name) {
  this.name = name;
}

Rabbit.prototype = animal;

let rabbit = new Rabbit("White Rabbit"); //  rabbit.__proto__ == animal

alert( rabbit.eats ); // true
```

Giáº£i thÃ­ch:

- Khi new Rabbit("White Rabbit") cháº¡y
- JS khÃ´ng sao chÃ©p cÃ¡c thuá»™c tÃ­nh tá»« animal
- JS chá»‰ gÃ¡n [[Prototype]] cá»§a rabbit = animal
- â†’ nÃªn rabbit cÃ³ thá»ƒ truy cáº­p animal.eats nhá» káº¿ thá»«a

## 2. F.prototype chá»‰ Ä‘Æ°á»£c dÃ¹ng khi táº¡o object má»›i
```js
function Rabbit() {}
Rabbit.prototype = animal;

let rabbit1 = new Rabbit();

Rabbit.prototype = {}; // Ä‘á»•i prototype khÃ¡c

let rabbit2 = new Rabbit();
```

Káº¿t quáº£:
```
rabbit1.__proto__ = animal

rabbit2.__proto__ = {}
```
â¡ï¸ Object Ä‘Ã£ táº¡o giá»¯ nguyÃªn prototype cÅ©.

## 3. GiÃ¡ trá»‹ máº·c Ä‘á»‹nh cá»§a F.prototype

Má»i function Ä‘á»u cÃ³ prototype máº·c Ä‘á»‹nh:

```js
function Rabbit() {}
// by default:
// Rabbit.prototype = { constructor: Rabbit }

let rabbit = new Rabbit(); // inherits from {constructor: Rabbit}

alert(rabbit.constructor == Rabbit); // true (from prototype)
```
```mermaid
flowchart LR
    subgraph ConstructorFunction
        A[ Rabbit ]
    end

    subgraph PrototypeObject
        B{ Rabbit.prototype<br/>constructor: Rabbit }
    end

    subgraph Instance
        C[ rabbit ]
    end

    A --prototype--> B
    C --[[Prototype]]--> B
    C --constructor--> A

```

Kiá»ƒm tra:
```js
function Rabbit() {}
alert( Rabbit.prototype.constructor == Rabbit ); // true
```

â¡ï¸ Máº·c Ä‘á»‹nh, má»i object Ä‘Æ°á»£c táº¡o báº±ng new Rabbit() Ä‘á»u cÃ³ constructor = Rabbit.

Ta cÃ³ thá»ƒ dÃ¹ng constructor cá»§a má»™t object Ä‘á»ƒ táº¡o object má»›i:
```js
function Rabbit(name) {
  this.name = name;
  alert(name);
}

let rabbit = new Rabbit("White Rabbit");

let rabbit2 = new rabbit.constructor("Black Rabbit");
```
## 4. Cáº£nh bÃ¡o quan trá»ng: ghi Ä‘Ã¨ prototype lÃ m máº¥t constructor

Náº¿u báº¡n thay tháº¿ prototype báº±ng object má»›i, báº¡n máº¥t constructor máº·c Ä‘á»‹nh:
```js
function Rabbit() {}
Rabbit.prototype = {
  jumps: true
};

let rabbit = new Rabbit();
alert(rabbit.constructor === Rabbit); // false
```

VÃ¬ object má»›i khÃ´ng chá»©a thuá»™c tÃ­nh constructor.

## 5. CÃ¡ch giá»¯ láº¡i constructor Ä‘Ãºng
### CÃ¡ch 1 â€” Chá»‰ thÃªm thuá»™c tÃ­nh, khÃ´ng ghi Ä‘Ã¨
```js
function Rabbit() {}

// Not overwrite Rabbit.prototype totally
Rabbit.prototype.jumps = true;
// constructor váº«n cÃ²n
```
### CÃ¡ch 2 â€” Ghi Ä‘Ã¨ nhÆ°ng bá»• sung constructor thá»§ cÃ´ng
```js
Rabbit.prototype = {
  jumps: true,
  constructor: Rabbit
};
```
## 6. prototype trÃªn object bÃ¬nh thÆ°á»ng KHÃ”NG cÃ³ Ã½ nghÄ©a Ä‘áº·c biá»‡t
```js
let user = {
  name: "John",
  prototype: "Bla-bla" // no magic at all
};
```

Chá»‰ functions dÃ¹ng vá»›i new má»›i kÃ­ch hoáº¡t cÆ¡ cháº¿ F.prototype â†’ [[Prototype]].

## ğŸ¯ Summary â€“ TÃ³m táº¯t cá»±c ngáº¯n

- F.prototype (má»™t thuá»™c tÃ­nh bÃ¬nh thÆ°á»ng) â†’ Ä‘Æ°á»£c dÃ¹ng khi gá»i new F()
â†’ thiáº¿t láº­p [[Prototype]] cho object má»›i.
- KhÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n object Ä‘Ã£ táº¡o.
- Máº·c Ä‘á»‹nh `F.prototype = { constructor: F }`.
- Ghi Ä‘Ã¨ prototype lÃ m máº¥t constructor, cáº§n tá»± thÃªm láº¡i.
- TrÃªn object thÆ°á»ng, thuá»™c tÃ­nh `"prototype"` khÃ´ng cÃ³ tÃ¡c dá»¥ng Ä‘áº·c biá»‡t.

# BÃ€I Táº¬P

## BÃ i táº­p 1 : Changing "prototype"

Trong Ä‘oáº¡n code dÆ°á»›i Ä‘Ã¢y, chÃºng ta táº¡o má»™t Rabbit má»›i vÃ  sau Ä‘Ã³ thá»­ thay Ä‘á»•i prototype cá»§a nÃ³.

Ban Ä‘áº§u ta cÃ³ Ä‘oáº¡n code sau:
```js
function Rabbit() {}
Rabbit.prototype = {
  eats: true
};

let rabbit = new Rabbit();

alert( rabbit.eats ); // true
```

ChÃºng ta thÃªm má»™t dÃ²ng ná»¯a (Ä‘Ã£ nháº¥n máº¡nh). LÃºc nÃ y alert sáº½ hiá»ƒn thá»‹ gÃ¬?
```js
function Rabbit() {}
Rabbit.prototype = {
  eats: true
};

let rabbit = new Rabbit();

Rabbit.prototype = {}; 
alert( rabbit.eats ); // ? 
```

â€¦VÃ  náº¿u code thay báº±ng Ä‘oáº¡n sau (thay tháº¿ 1 dÃ²ng)?
```js
function Rabbit() {}
Rabbit.prototype = {
  eats: true
};

let rabbit = new Rabbit();

Rabbit.prototype.eats = false;

alert( rabbit.eats ); // ?
```

VÃ  trÆ°á»ng há»£p nÃ y (thay tháº¿ 1 dÃ²ng)?
```js
function Rabbit() {}
Rabbit.prototype = {
  eats: true
};

let rabbit = new Rabbit();

delete rabbit.eats;

alert( rabbit.eats ); // ?
```

TrÆ°á»ng há»£p cuá»‘i:
```js
function Rabbit() {}
Rabbit.prototype = {
  eats: true
};

let rabbit = new Rabbit();

delete Rabbit.prototype.eats;

alert( rabbit.eats ); // ?
```

### Solution
Káº¿t quáº£ hiá»ƒn thá»‹ láº§n lÆ°á»£t lÃ :
1. true, vÃ¬ thuá»™c tÃ­nh Ä‘Æ°á»£c tÃ¬m tháº¥y trong Rabbit.prototype
2. false, vÃ¬ thuá»™c tÃ­nh Ä‘Æ°á»£c tÃ¬m tháº¥y trong Rabbit.prototype
3. true, vÃ¬ thuá»™c tÃ­nh Ä‘Æ°á»£c tÃ¬m tháº¥y trong Rabbit.prototype
4. undefined, vÃ¬ thuá»™c tÃ­nh Ä‘Ã£ bá»‹ xÃ³a khá»i Rabbit.prototype

## BÃ i táº­p 2 : Create an object with the same constructor

importance: 5

Giáº£ sá»­ ta cÃ³ má»™t object tÃ¹y Ã½ obj, Ä‘Æ°á»£c táº¡o bá»Ÿi má»™t constructor function â€“ nhÆ°ng ta khÃ´ng biáº¿t constructor nÃ o.

Ta muá»‘n táº¡o má»™t object má»›i báº±ng chÃ­nh constructor Ä‘Ã³.

Liá»‡u ta cÃ³ thá»ƒ lÃ m nhÆ° sau khÃ´ng?
```js
let obj2 = new obj.constructor();
```

HÃ£y Ä‘Æ°a ra:

Má»™t vÃ­ dá»¥ constructor khiáº¿n Ä‘oáº¡n code trÃªn hoáº¡t Ä‘á»™ng Ä‘Ãºng, vÃ 

Má»™t vÃ­ dá»¥ khiáº¿n nÃ³ hoáº¡t Ä‘á»™ng sai.

### Solution
VÃ­ dá»¥ hoáº¡t Ä‘á»™ng Ä‘Ãºng:
```js
function Obj() {
  
}
let obj = new Obj();
let obj2 = new obj.constructor(); // works
```
VÃ­ dá»¥ hoáº¡t Ä‘á»™ng sai:
```js
function Obj() {
  
}
Obj.prototype = {}; // overwrite prototype, máº¥t constructor
let obj = new Obj();
let obj2 = new obj.constructor(); // Error
```